import{a as P,e as $,h as r,k as x,w as C,o as i,b as u,d as a,F as A,r as B,p,v as y,t as _,q as b,s as g,x as E}from"./index-FQvuEpbZ.js";const S=["onClick"],V=a("path",{d:"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z",style:{fill:"#fff"}},null,-1),q=[V],F={class:"post-title"},I=a("hr",null,null,-1),L=a("div",null,null,-1),M={class:"edit-posts"},T=a("label",null,"Title:",-1),Z=a("label",null,"Text:",-1),D={class:"edit-post-btn"},R={__name:"posts",setup(N){const l=P(),c=$(),m=c.params.id,d=r(l.state.posts),n=r(),v=r(),s=r({id:null,active:!1,status:""}),w=async(o,t)=>{const e={userId:+c.params.id,id:d.value.length,title:`${o}`,body:`${t}`};l.state.oldId=m,await l.dispatch("addPost",e),d.value=l.state.posts,console.log(l.state.posts)},f=async(o,t,e)=>{const k={userId:c.params.id,id:o,title:`${t}`,body:`${e}`};l.state.oldId=m,await l.dispatch("editPost",k),d.value=l.state.posts,console.log(l.state.posts)},h=async o=>{const t=await E(o);l.commit("uploadPosts",t),d.value=l.state.posts,console.log(d.value)};return x(()=>{h(m)}),C(()=>c.params.id,(o,t)=>{o!==t&&h(o)}),console.log(d.value),(o,t)=>(i(),u("div",null,[a("div",{class:"add",onClick:t[0]||(t[0]=e=>{s.value.active=!0,s.value.status="Add",f(s.value.id,n.value,v.value)})},"Add post"),(i(!0),u(A,null,B(d.value,e=>p((i(),u("div",{class:"post",key:e},[(i(),u("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",class:"edit-post",onClick:k=>{s.value.active=!0,s.value.status="Edit",s.value.id=e.id}},q,8,S)),a("div",F,[a("h2",null,_(e.title),1),I]),a("p",null,_(e.body),1)])),[[y,s.value.active===!1]])),128)),L,p(a("form",M,[a("h3",null,_(s.value.status)+": post",1),T,p(a("input",{class:"edit-post-titile","onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),required:""},null,512),[[b,n.value]]),Z,p(a("textarea",{class:"edit-post-body","onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),required:""},null,512),[[b,v.value]]),a("div",D,[a("div",{onClick:t[3]||(t[3]=e=>{s.value.active=!1,s.value.status=""})}," back "),s.value.status==="Add"?(i(),u("div",{key:0,class:"edit-post-save",onClick:t[4]||(t[4]=e=>{s.value.active=!1,s.value.status="",w(n.value,v.value)})}," add ")):g("",!0),s.value.status==="Edit"?(i(),u("div",{key:1,class:"edit-post-save",onClick:t[5]||(t[5]=e=>{s.value.active=!1,s.value.status="",f(s.value.id,n.value,v.value)})}," save ")):g("",!0)])],512),[[y,s.value.active===!0]])]))}};export{R as default};
